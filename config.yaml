target_fps: 30 # FPS desejado para captura (frames por segundo)
protocol: amqp # amqp | mqtt

amqp:
  amqp_url: "amqp://user:password@rabbitmq:5672/supermercado_vhost"
  exchange: "supermercado_exchange"
  routing_key_prefix: "camera."

mqtt:
  broker: "tcp://localhost:1883"
  topic_prefix: "camera/"

optimization:
  max_workers: 20                  # Número de workers para processar frames
  buffer_size: 200                 # Tamanho do buffer de frames
  frame_quality: 5                 # Qualidade JPEG (2-31, menor = melhor)
  frame_resolution: "1280x720"     # Resolução dos frames
  use_persistent: true             # Usar captura persistente FFmpeg
  circuit_max_failures: 5          # Falhas antes de abrir circuit breaker
  circuit_reset_seconds: 60        # Tempo para tentar reconectar (segundos)

cameras:
  - id: "cam1"
    url: "rtsp://shopguard:!Sg36786@191.7.178.101:8554/cam/realmonitor?channel=1&subtype=0"
  - id: "cam2"
    url: "rtsp://shopguard:!Sg36786@191.7.178.101:8554/cam/realmonitor?channel=2&subtype=0"
  - id: "cam3"
    url: "rtsp://shopguard:!Sg36786@191.7.178.101:8554/cam/realmonitor?channel=3&subtype=0"
  - id: "cam4"
    url: "rtsp://shopguard:!Sg36786@191.7.178.101:8554/cam/realmonitor?channel=4&subtype=0"
  - id: "cam5"
    url: "rtsp://shopguard:!Sg36786@191.7.178.101:8554/cam/realmonitor?channel=5&subtype=0"

redis:
  enabled: true
  address: "redis:6379"
  ttl_seconds: 300
  prefix: "frames"

metadata:
  enabled: true
  exchange: "camera.metadata"
  routing_key: "camera.metadata.event"
